%!PS-Adobe-2.0
%%Creator: dvipsk 5.55a Copyright 1986, 1994 Radical Eye Software
%%Title: cdbfile.dvi
%%Pages: 11
%%PageOrder: Ascend
%%BoundingBox: 0 0 596 842
%%DocumentFonts: Palatino-Roman Palatino-Bold Courier Helvetica
%%+ Palatino-Italic
%%EndComments
%DVIPSCommandLine: dvips -o cdbfile.ps cdbfile
%DVIPSParameters: dpi=300, compressed, comments removed
%DVIPSSource:  TeX output 1997.03.25:1452
%%BeginProcSet: texc.pro
/TeXDict 250 dict def TeXDict begin /N{def}def /B{bind def}N /S{exch}N
/X{S N}B /TR{translate}N /isls false N /vsize 11 72 mul N /hsize 8.5 72
mul N /landplus90{false}def /@rigin{isls{[0 landplus90{1 -1}{-1 1}
ifelse 0 0 0]concat}if 72 Resolution div 72 VResolution div neg scale
isls{landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div
hsize mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul
TR matrix currentmatrix dup dup 4 get round 4 exch put dup dup 5 get
round 5 exch put setmatrix}N /@landscape{/isls true N}B /@manualfeed{
statusdict /manualfeed true put}B /@copies{/#copies X}B /FMat[1 0 0 -1 0
0]N /FBB[0 0 0 0]N /nn 0 N /IE 0 N /ctr 0 N /df-tail{/nn 8 dict N nn
begin /FontType 3 N /FontMatrix fntrx N /FontBBox FBB N string /base X
array /BitMaps X /BuildChar{CharBuilder}N /Encoding IE N end dup{/foo
setfont}2 array copy cvx N load 0 nn put /ctr 0 N[}B /df{/sf 1 N /fntrx
FMat N df-tail}B /dfs{div /sf X /fntrx[sf 0 0 sf neg 0 0]N df-tail}B /E{
pop nn dup definefont setfont}B /ch-width{ch-data dup length 5 sub get}
B /ch-height{ch-data dup length 4 sub get}B /ch-xoff{128 ch-data dup
length 3 sub get sub}B /ch-yoff{ch-data dup length 2 sub get 127 sub}B
/ch-dx{ch-data dup length 1 sub get}B /ch-image{ch-data dup type
/stringtype ne{ctr get /ctr ctr 1 add N}if}B /id 0 N /rw 0 N /rc 0 N /gp
0 N /cp 0 N /G 0 N /sf 0 N /CharBuilder{save 3 1 roll S dup /base get 2
index get S /BitMaps get S get /ch-data X pop /ctr 0 N ch-dx 0 ch-xoff
ch-yoff ch-height sub ch-xoff ch-width add ch-yoff setcachedevice
ch-width ch-height true[1 0 0 -1 -.1 ch-xoff sub ch-yoff .1 add]/id
ch-image N /rw ch-width 7 add 8 idiv string N /rc 0 N /gp 0 N /cp 0 N{
rc 0 ne{rc 1 sub /rc X rw}{G}ifelse}imagemask restore}B /G{{id gp get
/gp gp 1 add N dup 18 mod S 18 idiv pl S get exec}loop}B /adv{cp add /cp
X}B /chg{rw cp id gp 4 index getinterval putinterval dup gp add /gp X
adv}B /nd{/cp 0 N rw exit}B /lsh{rw cp 2 copy get dup 0 eq{pop 1}{dup
255 eq{pop 254}{dup dup add 255 and S 1 and or}ifelse}ifelse put 1 adv}
B /rsh{rw cp 2 copy get dup 0 eq{pop 128}{dup 255 eq{pop 127}{dup 2 idiv
S 128 and or}ifelse}ifelse put 1 adv}B /clr{rw cp 2 index string
putinterval adv}B /set{rw cp fillstr 0 4 index getinterval putinterval
adv}B /fillstr 18 string 0 1 17{2 copy 255 put pop}for N /pl[{adv 1 chg}
{adv 1 chg nd}{1 add chg}{1 add chg nd}{adv lsh}{adv lsh nd}{adv rsh}{
adv rsh nd}{1 add adv}{/rc X nd}{1 add set}{1 add clr}{adv 2 chg}{adv 2
chg nd}{pop nd}]dup{bind pop}forall N /D{/cc X dup type /stringtype ne{]
}if nn /base get cc ctr put nn /BitMaps get S ctr S sf 1 ne{dup dup
length 1 sub dup 2 index S get sf div put}if put /ctr ctr 1 add N}B /I{
cc 1 add D}B /bop{userdict /bop-hook known{bop-hook}if /SI save N @rigin
0 0 moveto /V matrix currentmatrix dup 1 get dup mul exch 0 get dup mul
add .99 lt{/QV}{/RV}ifelse load def pop pop}N /eop{SI restore showpage
userdict /eop-hook known{eop-hook}if}N /@start{userdict /start-hook
known{start-hook}if pop /VResolution X /Resolution X 1000 div /DVImag X
/IE 256 array N 0 1 255{IE S 1 string dup 0 3 index put cvn put}for
65781.76 div /vsize X 65781.76 div /hsize X}N /p{show}N /RMat[1 0 0 -1 0
0]N /BDot 260 string N /rulex 0 N /ruley 0 N /v{/ruley X /rulex X V}B /V
{}B /RV statusdict begin /product where{pop product dup length 7 ge{0 7
getinterval dup(Display)eq exch 0 4 getinterval(NeXT)eq or}{pop false}
ifelse}{false}ifelse end{{gsave TR -.1 -.1 TR 1 1 scale rulex ruley
false RMat{BDot}imagemask grestore}}{{gsave TR -.1 -.1 TR rulex ruley
scale 1 1 false RMat{BDot}imagemask grestore}}ifelse B /QV{gsave
transform round exch round exch itransform moveto rulex 0 rlineto 0
ruley neg rlineto rulex neg 0 rlineto fill grestore}B /a{moveto}B /delta
0 N /tail{dup /delta X 0 rmoveto}B /M{S p delta add tail}B /b{S p tail}
B /c{-4 M}B /d{-3 M}B /e{-2 M}B /f{-1 M}B /g{0 M}B /h{1 M}B /i{2 M}B /j{
3 M}B /k{4 M}B /w{0 rmoveto}B /l{p -4 w}B /m{p -3 w}B /n{p -2 w}B /o{p
-1 w}B /q{p 1 w}B /r{p 2 w}B /s{p 3 w}B /t{p 4 w}B /x{0 S rmoveto}B /y{
3 2 roll p a}B /bos{/SS save N}B /eos{SS restore}B end
%%EndProcSet
%%BeginProcSet: texps.pro
TeXDict begin /rf{findfont dup length 1 add dict begin{1 index /FID ne 2
index /UniqueID ne and{def}{pop pop}ifelse}forall[1 index 0 6 -1 roll
exec 0 exch 5 -1 roll VResolution Resolution div mul neg 0 0]/Metrics
exch def dict begin Encoding{exch dup type /integertype ne{pop pop 1 sub
dup 0 le{pop}{[}ifelse}{FontMatrix 0 get div Metrics 0 get div def}
ifelse}forall Metrics /Metrics currentdict end def[2 index currentdict
end definefont 3 -1 roll makefont /setfont load]cvx def}def
/ObliqueSlant{dup sin S cos div neg}B /SlantFont{4 index mul add}def
/ExtendFont{3 -1 roll mul exch}def /ReEncodeFont{/Encoding exch def}def
end
%%EndProcSet
%%BeginProcSet: special.pro
TeXDict begin /SDict 200 dict N SDict begin /@SpecialDefaults{/hs 612 N
/vs 792 N /ho 0 N /vo 0 N /hsc 1 N /vsc 1 N /ang 0 N /CLIP 0 N /rwiSeen
false N /rhiSeen false N /letter{}N /note{}N /a4{}N /legal{}N}B
/@scaleunit 100 N /@hscale{@scaleunit div /hsc X}B /@vscale{@scaleunit
div /vsc X}B /@hsize{/hs X /CLIP 1 N}B /@vsize{/vs X /CLIP 1 N}B /@clip{
/CLIP 2 N}B /@hoffset{/ho X}B /@voffset{/vo X}B /@angle{/ang X}B /@rwi{
10 div /rwi X /rwiSeen true N}B /@rhi{10 div /rhi X /rhiSeen true N}B
/@llx{/llx X}B /@lly{/lly X}B /@urx{/urx X}B /@ury{/ury X}B /magscale
true def end /@MacSetUp{userdict /md known{userdict /md get type
/dicttype eq{userdict begin md length 10 add md maxlength ge{/md md dup
length 20 add dict copy def}if end md begin /letter{}N /note{}N /legal{}
N /od{txpose 1 0 mtx defaultmatrix dtransform S atan/pa X newpath
clippath mark{transform{itransform moveto}}{transform{itransform lineto}
}{6 -2 roll transform 6 -2 roll transform 6 -2 roll transform{
itransform 6 2 roll itransform 6 2 roll itransform 6 2 roll curveto}}{{
closepath}}pathforall newpath counttomark array astore /gc xdf pop ct 39
0 put 10 fz 0 fs 2 F/|______Courier fnt invertflag{PaintBlack}if}N
/txpose{pxs pys scale ppr aload pop por{noflips{pop S neg S TR pop 1 -1
scale}if xflip yflip and{pop S neg S TR 180 rotate 1 -1 scale ppr 3 get
ppr 1 get neg sub neg ppr 2 get ppr 0 get neg sub neg TR}if xflip yflip
not and{pop S neg S TR pop 180 rotate ppr 3 get ppr 1 get neg sub neg 0
TR}if yflip xflip not and{ppr 1 get neg ppr 0 get neg TR}if}{noflips{TR
pop pop 270 rotate 1 -1 scale}if xflip yflip and{TR pop pop 90 rotate 1
-1 scale ppr 3 get ppr 1 get neg sub neg ppr 2 get ppr 0 get neg sub neg
TR}if xflip yflip not and{TR pop pop 90 rotate ppr 3 get ppr 1 get neg
sub neg 0 TR}if yflip xflip not and{TR pop pop 270 rotate ppr 2 get ppr
0 get neg sub neg 0 S TR}if}ifelse scaleby96{ppr aload pop 4 -1 roll add
2 div 3 1 roll add 2 div 2 copy TR .96 dup scale neg S neg S TR}if}N /cp
{pop pop showpage pm restore}N end}if}if}N /normalscale{Resolution 72
div VResolution 72 div neg scale magscale{DVImag dup scale}if 0 setgray}
N /psfts{S 65781.76 div N}N /startTexFig{/psf$SavedState save N userdict
maxlength dict begin /magscale false def normalscale currentpoint TR
/psf$ury psfts /psf$urx psfts /psf$lly psfts /psf$llx psfts /psf$y psfts
/psf$x psfts currentpoint /psf$cy X /psf$cx X /psf$sx psf$x psf$urx
psf$llx sub div N /psf$sy psf$y psf$ury psf$lly sub div N psf$sx psf$sy
scale psf$cx psf$sx div psf$llx sub psf$cy psf$sy div psf$ury sub TR
/showpage{}N /erasepage{}N /copypage{}N /p 3 def @MacSetUp}N /doclip{
psf$llx psf$lly psf$urx psf$ury currentpoint 6 2 roll newpath 4 copy 4 2
roll moveto 6 -1 roll S lineto S lineto S lineto closepath clip newpath
moveto}N /endTexFig{end psf$SavedState restore}N /@beginspecial{SDict
begin /SpecialSave save N gsave normalscale currentpoint TR
@SpecialDefaults count /ocount X /dcount countdictstack N}N /@setspecial
{CLIP 1 eq{newpath 0 0 moveto hs 0 rlineto 0 vs rlineto hs neg 0 rlineto
closepath clip}if ho vo TR hsc vsc scale ang rotate rwiSeen{rwi urx llx
sub div rhiSeen{rhi ury lly sub div}{dup}ifelse scale llx neg lly neg TR
}{rhiSeen{rhi ury lly sub div dup scale llx neg lly neg TR}if}ifelse
CLIP 2 eq{newpath llx lly moveto urx lly lineto urx ury lineto llx ury
lineto closepath clip}if /showpage{}N /erasepage{}N /copypage{}N newpath
}N /@endspecial{count ocount sub{pop}repeat countdictstack dcount sub{
end}repeat grestore SpecialSave restore end}N /@defspecial{SDict begin}
N /@fedspecial{end}B /li{lineto}B /rl{rlineto}B /rc{rcurveto}B /np{
/SaveX currentpoint /SaveY X N 1 setlinecap newpath}N /st{stroke SaveX
SaveY moveto}N /fil{fill SaveX SaveY moveto}N /ellipse{/endangle X
/startangle X /yrad X /xrad X /savematrix matrix currentmatrix N TR xrad
yrad scale 0 0 1 startangle endangle arc savematrix setmatrix}N end
%%EndProcSet
TeXDict begin 39158280 55380996 1000 300 300 (cdbfile.dvi)
@start /Fa 190[23 65[{}1 29.166668 /Palatino-Roman rf
/Fb 81[21 51[21 21 21 30 21 23 12 21 14 1[23 23 23 35
9 2[9 23 23 12 23 23 21 23 23 10[28 2[28 2[28 3[23 17[12
3[23 23 1[23 23 2[12 12 46[{}35 41.666668 /Helvetica
rf /Fc 134[19 3[21 12 15 15 2[17 21 29 10 2[10 19 2[15
19 2[17 23[12 29 3[29 4[19 16[9 6[10 39[{}20 37.500000
/Palatino-Italic rf /Fd 139[12 11[22 45[9 12[12 3[12
41[{}5 37.500000 /Palatino-Roman rf /Fe 134[21 3[23 14
16 16 2[18 23 1[12 6[16 1[17 19 18 97[{}12 41.666668
/Palatino-Italic rf /Ff 1 16 df<EA03C0EA0FF0EA1FF8EA3FFCEA7FFEA2B5FCA4EA
7FFEA2EA3FFCEA1FF8EA0FF0EA03C010107E9115>15 D E /Fg 59[20
70[20 1[20 20 20 20 20 20 20 20 20 20 1[20 20 20 20 20
2[20 20 20 20 20 20 20 20 20 3[20 1[20 3[20 20 20 20
20 20 1[20 20 20 20 20 2[20 20 20 20 20 20 20 20 20 2[20
20 1[20 20 3[20 20 2[20 20 20 20 20 20 20 1[20 20 20
6[20 33[{}65 33.333332 /Courier rf /Fh 3 64 df<1302131E137EEA01FE120F12
FFA2120F1201EA007E131E13020F0C7E852A>27 D<1206A4120FA3EA1F80A2EA3FC0A2EA
7FE0A3EAFFF00C0F86A72A>54 D<EAFFF0EA7FE0A3EA3FC0A2EA1F80A2EA0F00A31206A4
0C0F86902A>63 D E /Fi 139[10 19 12 2[21 21 1[8 2[8 3[21
21 19 16[27 5[21 5[23 1[27 27 25 14[21 21 3[10 46[{}19
37.500000 /Helvetica rf /Fj 81[30 55[28 30 17 1[19 1[30
28 30 1[17 1[17 17 30 1[19 25 30 22 30 25 12[33 30 10[41
1[28 1[41 36 33 13[25 25 25 25 2[12 12[14 33[{}31 50.000000
/Palatino-Bold rf /Fk 81[20 53[17 28 19 20 11 14 13 2[18
19 1[10 2[10 19 18 11 16 20 15 1[17 8[22 33 1[26 20 17
22 3[28 1[20 2[11 2[18 20 1[24 20 26 17[20 8 1[8 1[13
8[9 33[{}38 33.333332 /Palatino-Roman rf /Fl 2 51 df<1218127812981218AC
12FF08107D8F0F>49 D<121FEA6180EA40C0EA806012C01200A213C0EA0180EA03001206
5AEA10201220EA7FC012FF0B107F8F0F>I E /Fm 133[22 22 1[22
22 22 22 22 22 1[22 22 22 22 22 22 1[22 22 22 22 22 22
22 22 22 7[22 4[22 22 22 1[22 22 22 22 22 1[22 22 22
22 22 22 22 22 22 22 1[22 5[22 22 22 22 22 22 22 22 22
22 1[22 22 22 22 1[22 22 40[{}59 37.500000 /Courier rf
/Fn 59[25 74[25 25 25 25 25 25 25 25 1[25 25 25 25 25
25 1[25 25 25 25 25 25 25 25 25 7[25 1[25 25 25 25 25
25 1[25 25 25 25 25 2[25 25 25 25 1[25 25 25 25 25 5[25
7[25 25 25 1[25 25 2[25 25 25 25 4[25 34[{}56 41.666668
/Courier rf /Fo 2 51 df<120C121C12EC120CAFEAFFC00A137D9211>49
D<121FEA60C01360EAF07013301260EA0070A2136013C012011380EA02005AEA08101210
EA2020EA7FE012FF0C137E9211>I E /Fp 1 59 df<126012F0A2126004047C830C>58
D E /Fq 47[42 21[21 10[25 25 51[21 23 21 35 23 25 14
18 16 23 25 23 24 37 12 23 10 12 24 23 14 20 25 18 23
21 12 6[28 28 42 30 32 25 22 28 1[25 33 34 39 25 30 1[14
35 32 23 25 32 29 25 32 1[18 3[10 10 21 21 21 21 21 21
21 21 21 21 25 10 14 10 25 1[14 14 12 2[21 2[12 33[{}77
41.666668 /Palatino-Roman rf /Fr 61[14 19[25 53[21 1[23
25 14 18 16 1[25 23 25 37 14 25 14 14 25 23 16 21 25
18 25 21 10[32 32 28 25 30 1[25 35 35 42 25 2[16 35 35
23 25 35 30 28 32 6[10 3[21 21 21 21 21 21 21 1[10 14
1[25 3[12 39[{}55 41.666668 /Palatino-Bold rf /Fs 81[37
53[30 2[37 20 27 23 1[37 33 37 53 20 1[20 20 37 1[23
30 37 27 37 30 12[40 37 9[23 2[33 37 50 43 40 47 6[15
3[30 30 30 30 30 30 49[{}36 59.999973 /Palatino-Bold
rf /Ft 61[17 75[28 3[20 2[27 29 4[14 29 2[24 1[22 1[25
11[39 31 26 33 2[39 41 47 30 3[41 38 1[30 3[39 7[25 1[25
1[25 2[25 25 4[12 44[{}28 50.000000 /Palatino-Roman rf
/Fu 81[43 54[60 41 2[30 28 1[43 39 42 1[21 40 1[21 42
40 24 34 44 32 1[36 9[72 3[38 3[56 5[24 2[40 44 56 51
44 56 15[36 36 43 18 1[18 43 43[{}34 72.000000 /Palatino-Roman
rf end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 300dpi
TeXDict begin
%%PaperSize: a4

%%EndSetup
%%Page: 1 1
1 0 bop 231 369 a Fu(CDBFile)17 b(v)-8 b(.)23 b(1.0,)18
b(a)g(C++)g(package)g(for)h(handling)684 461 y(dBASE)e(III)h(\256les)
540 552 y(DOS/W)l(indows)g(version)466 672 y Ft(Herv)t(\302)-21
b(e)12 b(GOURMELON,)j(ENSSA)l(T)e(Lannion)751 772 y(Mar)o(ch)f(25,)h
(1997)165 956 y Fs(Contents)165 1051 y Fr(1)41 b(Introduction)1179
b(2)165 1142 y(2)41 b(The)10 b(dBASE)i(III)f(Database)e(\256le)i
(structure)704 b(2)165 1233 y(3)41 b(Description)11 b(of)g(the)f
(object)948 b(3)227 1283 y Fq(3.1)44 b(Speci\256cation)38
b Fp(:)20 b(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)68
b Fq(3)227 1333 y(3.2)44 b(Structur)o(e)39 b Fp(:)20
b(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)68
b Fq(4)227 1383 y(3.3)44 b(The)11 b(CField)g(object)17
b Fp(:)j(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)
h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)68 b
Fq(4)227 1433 y(3.4)44 b(The)11 b(CDBFile)g(object)17
b Fp(:)j(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)
f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)68 b Fq(5)323
1483 y(3.4.1)50 b(Handling)10 b(the)g(r)o(ecor)o(d)i(list)24
b Fp(:)c(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)
f(:)g(:)g(:)h(:)68 b Fq(5)323 1532 y(3.4.2)50 b(Handling)10
b(the)g(contents)f(of)h(the)g(r)o(ecor)o(ds)21 b Fp(:)f(:)h(:)f(:)g(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)68 b Fq(7)323 1582
y(3.4.3)50 b(Handling)10 b(the)g(\256les)36 b Fp(:)20
b(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)g(:)h(:)68 b Fq(8)165 1673 y Fr(4)41 b(An)11
b(example:)j(the)c(T)-5 b(estDBF)10 b(\256le)g(editor)719
b(10)165 1765 y(5)41 b(Conclusion)1181 b(10)165 1856
y(6)41 b(Contributors)1155 b(1)n(1)905 2960 y Fq(1)p
eop
%%Page: 2 2
2 1 bop 165 197 a Fs(1)60 b(Introduction)165 291 y Fq(Last)10
b(term,)g(I)g(had)h(to)e(begin)i(a)f(r)o(eengineering)i(pr)o(oject)e
(for)g(the)g(ENSSA)m(T)m(,)i(the)e(Fr)o(ench)i(grad-)165
341 y(uate)d(school)h(I)h(am)e(working)h(at.)k(The)d(cor)o(e)g(of)e
(the)h(pr)o(oject)g(was)f(a)h(softwar)o(e)f(that)g(drives)i(au-)165
391 y(tomatic)f(doors)h(with)g(magnetic)g(car)o(ds,)i(which)f(ar)o(e)f
(r)o(eferr)o(ed)i(to)e(in)h(data)f(\256les.)17 b(W)l(ell,)11
b(I)h(had)165 441 y(long)f(thought)g(that)g(the)g Fr(dBASE)h(III)24
b Fq(\256le)11 b(standar)o(d)h(was)e(no)i(longer)g(in)f(use)g(since)h
Fr(dBASE)165 491 y(IV)h Fq(and)g Fr(dBASE)h(V)f Fq(had)h(appear)o(ed.)
21 b(It)13 b(turned)g(out)f(that)g(the)g(former)h(softwar)o(e)e(that)h
(was)165 540 y(running)g(those)e(doors)g(seemed)h(to)f(work)h(very)g
(well)g(with)f(those)g(DBF)i(\256les,)f(and)g(yet)g(their)165
590 y(structur)o(e)i(was)f(quite)h(simple.)21 b(I)13
b(could)h(have)f(chosen)g(to)f(use)h(raw)f(text)h(\256les)g(for)f(that)
g(ap-)165 640 y(plication,)g(which)h(woud)e(have)h(made)g(it)f(a)h(gr)o
(eat)g(deal)g(easier)f(to)g(pr)o(ogram.)19 b(But)12 b(ther)o(e)g(ar)o
(e)165 690 y(quite)g(a)h(few)e(companies)h(and)h(administrations)e(in)i
(France)g(that)e(used)i(the)f(same)f(system,)165 740
y(and)g(I)f(thought)g(that)f(it)h(would)g(be)g(easier)g(for)g(them)g
(to)g(migrate)f(to)h(a)g(new)g(softwar)o(e)f(if)h(they)165
789 y(did)h(not)f(have)h(to)e(modify)h(the)g(structur)o(e)g(of)g(their)
h(own)e(data)h(\256les.)227 839 y(Br)o(owsing)i(the)g(Net)g(for)g(some)
e(documents)i(or)g(some)f(code,)i(I)f(discover)o(ed)h(that)e(har)o(dly)
165 889 y(anything)i(had)f(been)h(r)o(eleased)f(under)i(the)e(GPL)964
874 y Fo(1)995 889 y Fq(in)h(that)e(\256eld.)21 b(The)13
b(only)g(thing)f(I)h(found)165 939 y(was)e(Mark)h(W)l(.)g(Schumann's)f
Fn("ffld.c")p Fq(,)g(but)h(I)f(needed)i(mor)o(e)e(than)h(that,)f(and)h
(I)g(wanted)165 989 y(those)f(tools)g(to)h(be)g(object-oriented.)19
b(So)12 b(I)h(decided)h(to)d(distribute)h(the)g(few)g(tools)f(I)h
(would)165 1039 y(build)g(under)h(the)e(GPL)h(\(please)f(r)o(ead)h(the)
f Fn(COPYING)h Fq(text)f(\256le)g(included)j(in)e(the)f(package\).)165
1088 y(They)d(ar)o(e)g(far)f(fr)o(om)g(being)g(compr)o(ehensive,)i(but)
e(I)g(hope)g(that)g(their)g(modularity)g(will)g(enable)165
1138 y(other)j(developpers)g(to)g(expand)h(them)f(and/or)g(customize)f
(them)h(as)g(they)g(like...)165 1281 y Fs(2)60 b(The)14
b(dBASE)f(III)i(Database)f(\256le)g(structure)165 1376
y Fq(The)8 b(structur)o(e)g(of)g(a)f(dBASE)j(III)e(database)e(\256le)i
(is)g(composed)f(of)h(a)f(header)i(and)f(data)f(r)o(ecor)o(ds.)165
1425 y(The)k(layout)e(is)h(given)h(below)l(.)p 165 1527
1498 2 v 164 1572 2 46 v 190 1559 a Fm(BYTE)p 326 1572
V 74 w(CONTENTS)p 667 1572 V 165 w(MEANING)p 1662 1572
V 165 1574 1498 2 v 165 1582 V 164 1674 2 92 v 190 1614
a(0)p 326 1674 V 140 w(1)23 b(byte)p 667 1674 V 208 w(dBASE)i(III)e
(version)j(number)e(\(03H)g(without)i(a)693 1660 y(.DBT)e(file\))h
(\(83H)f(with)g(a)f(.DBT)h(file\))p 1662 1674 V 165 1675
1498 2 v 164 1767 2 92 v 190 1707 a(1-3)p 326 1767 V
96 w(3)f(bytes)p 667 1767 V 186 w(date)h(of)f(last)h(update)h(\(YY)f
(MM)f(DD\))h(in)f(binary)693 1753 y(format)p 1662 1767
V 165 1768 1498 2 v 164 1814 2 46 v 190 1800 a(4-7)p
326 1814 V 96 w(32)g(bit)h(number)p 667 1814 V 52 w(number)h(of)e
(records)j(in)d(data)h(file)p 1662 1814 V 165 1816 1498
2 v 164 1861 2 46 v 190 1848 a(8-9)p 326 1861 V 96 w(16)f(bit)h(number)
p 667 1861 V 52 w(length)h(of)e(header)i(structure)p
1662 1861 V 165 1863 1498 2 v 164 1909 2 46 v 190 1895
a(10-11)p 326 1909 V 52 w(16)e(bit)h(number)p 667 1909
V 52 w(length)h(of)e(the)h(record)p 1662 1909 V 165 1910
1498 2 v 164 1956 2 46 v 190 1942 a(12-31)p 326 1956
V 52 w(20)f(bytes)p 667 1956 V 164 w(reserved)j(bytes)e(\(version)i
(1.00\))p 1662 1956 V 165 1958 1498 2 v 164 2003 2 46
v 190 1990 a(32-n)p 326 2003 V 74 w(32)d(bytes)i(each)p
667 2003 V 51 w(field)g(descriptor)h(array)f(\(see)f(below\))p
1662 2003 V 165 2005 1498 2 v 164 2051 2 46 v 190 2037
a(n+1)p 326 2051 V 96 w(1)f(byte)p 667 2051 V 208 w(0DH)h(as)f(the)h
(field)g(terminato)q(r)p 1662 2051 V 165 2052 1498 2
v 549 2128 a Fq(Figur)o(e)11 b(1:)j(dBASE)d(III)g(database)e(\256le)h
(header)p 165 2241 V 164 2287 2 46 v 190 2273 a Fm(BYTE)p
326 2287 V 74 w(CONTENTS)p 667 2287 V 165 w(MEANING)p
1662 2287 V 165 2288 1498 2 v 165 2297 V 164 2342 2 46
v 190 2329 a(0-10)p 326 2342 V 74 w(11)23 b(bytes)p 667
2342 V 164 w(field)i(name)f(in)f(ASCII)h(zero-fil)q(led)p
1662 2342 V 165 2344 1498 2 v 164 2390 2 46 v 190 2376
a(11)p 326 2390 V 118 w(1)f(byte)p 667 2390 V 208 w(field)i(type)f(in)f
(ASCII)h(\(C)g(N)e(L)h(D)g(or)g(M\))p 1662 2390 V 165
2391 1498 2 v 164 2483 2 92 v 190 2423 a(12-15)p 326
2483 V 52 w(32)g(bit)h(number)p 667 2483 V 52 w(field)h(data)f(address)
h(\(address)h(is)d(set)h(in)693 2469 y(memory\))p 1662
2483 V 165 2484 1498 2 v 164 2530 2 46 v 190 2516 a(16)p
326 2530 V 118 w(1)f(byte)p 667 2530 V 208 w(field)i(length)f(in)g
(binary)p 1662 2530 V 165 2532 1498 2 v 164 2577 2 46
v 190 2564 a(17)p 326 2577 V 118 w(1)f(byte)p 667 2577
V 208 w(field)i(decimal)g(count)f(in)g(binary)p 1662
2577 V 165 2579 1498 2 v 164 2625 2 46 v 190 2611 a(18-31)p
326 2625 V 52 w(14)f(bytes)p 667 2625 V 164 w(reserved)j(bytes)e
(\(version)i(1.00\))p 1662 2625 V 165 2626 1498 2 v 667
2702 a Fq(Figur)o(e)11 b(2:)j(A)c(\256eld)h(descriptor)p
165 2741 600 2 v 207 2767 a Fl(1)225 2779 y Fk(W)m(ell,)d(I)g(discover)
o(ed)h(later)e(that)h(a)g(dBASE)i(\256le)d(viewer)h(also)g(existed,)g
(written)g(in)g(C)g(for)g(UNIX/Linux...)905 2960 y Fq(2)p
eop
%%Page: 3 3
3 2 bop 227 195 a Fq(The)11 b(data)f(r)o(ecor)o(ds)i(ar)o(e)e(layed)h
(out)e(as)h(follows:)217 278 y(1.)21 b(Data)9 b(r)o(ecor)o(ds)j(ar)o(e)
f(pr)o(eceeded)h(by)e(one)g(byte)g(that)g(is)g(a)g(space)g
Fn(\(20H\))g Fq(if)g(the)g(r)o(ecor)o(d)i(is)269 328
y(not)e(deleted)g(and)h(an)f(asterisk)f Fn(\(2AH\))h
Fq(if)g(it)g(is)g(deleted.)217 411 y(2.)21 b(Data)11
b(\256elds)g(ar)o(e)h(packed)g(into)f(r)o(ecor)o(ds)i(with)e(no)h
(\256eld)g(separators)e(or)h(r)o(ecor)o(d)j(termi-)269
461 y(nators.)217 544 y(3.)21 b(Data)9 b(types)h(ar)o(e)g(stor)o(ed)g
(in)h(ASCII)g(format)e(as)h(described)h(in)g(Figur)o(e)g(3.)p
165 645 1397 2 v 164 691 2 46 v 190 677 a Fm(DATA)24
b(TYPE)p 416 691 V 424 691 V 60 w(DATA)g(RECORD)h(STORAGE)p
1560 691 V 165 692 1397 2 v 164 738 2 46 v 190 724 a(Character)p
416 738 V 424 738 V 62 w(\(ASCII)g(characters)q(\))p
1560 738 V 165 740 1397 2 v 164 785 2 46 v 190 772 a(Numeric)p
416 785 V 424 785 V 106 w(-)e(.)45 b(0)23 b(1)g(2)f(3)h(4)g(5)g(6)g(7)g
(8)f(9)p 1560 785 V 165 787 1397 2 v 164 833 2 46 v 190
819 a(Logical)p 416 833 V 424 833 V 106 w(?)45 b(Y)23
b(y)g(N)g(n)f(T)h(t)g(F)g(f)g(\(?)45 b(when)24 b(not)g(initializ)q(ed)q
(\))p 1560 833 V 165 834 1397 2 v 164 880 2 46 v 190
866 a(Memo)p 416 880 V 424 880 V 172 w(\(10)f(digits)i(represen)q(ti)q
(ng)h(a)d(.DBT)h(block)g(number\))p 1560 880 V 165 882
1397 2 v 164 973 2 92 v 190 914 a(Date)p 416 973 V 424
973 V 172 w(\(8)f(digits)i(in)e(YYYYMMDD)j(format,)f(such)f(as)g
(19840704)450 959 y(for)f(July)i(4,)e(1984\))p 1560 973
V 165 975 1397 2 v 666 1049 a Fq(Figur)o(e)11 b(3:)j(Data)c(type)g
(storage)165 1237 y Fs(3)60 b(Description)13 b(of)i(the)f(object)165
1340 y Fj(3.1)50 b(Speci\256cation)165 1419 y Fq(For)13
b(the)f(pr)o(oject)h(I)g(was)f(working)h(on,)g(I)g(had)g(to)f(pr)o
(ocess)h(various)g(dBASE)h(\256les)e(that)g(wer)o(e)165
1469 y(very)f(dif)o(fer)o(ent)f(in)g(their)f(structur)o(es.)14
b(The)c(easiest)e(way)h(to)g(solve)g(that)g(pr)o(oblem)h(was)e(to)h(cr)
o(e-)165 1519 y(ate)e(a)h(set)f(of)g(tools)g(that)g(would)g(be)h
(completely)g(generic,)h(smart)e(enough)h(to)f(pr)o(ocess)h(various)165
1568 y(\256les)k(with)f(various)h(kinds)g(of)f(data.)18
b(I)12 b(thought)f(that)g(ther)o(e)h(could)g(be)g(a)g(speci\256c)g
(object)f(for)165 1618 y(the)f(\256le,)h(which)g(would)f(contain)g(at)g
(least)f(the)h(whole)g(description)g(of)g(the)g(header)m(.)227
1668 y(The)h(next)f(pr)o(oblem)f(was)g(:)14 b(how)c(will)f(I)h(stor)o
(e)f(the)h(r)o(ecor)o(ds?)15 b(The)c(\256rst)e(idea)h(that)f(springs)
165 1718 y(to)h(mind)g(is)g(:)269 1801 y(\272Okay)-5
b(,)8 b(let's)e(cr)o(eate)i(a)g(generic)g(structur)o(e)g(containing)g
(a)f(dynamic)i(list)e(of)g(\256elds,)269 1851 y(each)13
b(of)f(which)h(will)f(contain)h(the)f(data.)20 b(Every)14
b(\256eld)f(in)g(the)f(list)g(will)h(have)f(a)269 1901
y(type)h(identi\256er)m(,)i(a)e(buf)o(fer)g(containing)h(the)f(data,)h
(and)f(a)h(pointer)f(to)f(the)h(next)269 1950 y(\256eld.)h(Every)c(r)o
(ecor)o(d)h(will)e(be)g(a)g(list)f(of)h(those)f(\256elds,)i(and)f(the)g
(r)o(ecor)o(ds)h(will)f(also)269 2000 y(be)h(stor)o(ed)g(in)h(a)f
(dynamic)h(list\272.)227 2083 y(This)h(might)g(be)g(an)g(elegant)f
(solution,)g(but)h(it)f(is)h(very)h(heavy:)k(suppose)11
b(you)h(have)g(256)165 2133 y(\256elds)e(in)h(each)f(r)o(ecor)o(d,)i
(each)f(of)e(which)i(containing)f(only)h(one)e(byte)h(of)g(data...)k(W)
n(ith)9 b(all)h(the)165 2183 y(pointers)f(involved)i(in)f(the)g
(dynamic)g(structur)o(es,)g(the)f(data)g(could)i(take)e(up)h(to)f(ten)g
(times)g(as)165 2233 y(much)i(space)f(in)g(memory)g(as)g(on)g(the)g
(disk!)227 2282 y(In)i(or)o(der)h(to)d(save)i(memory)-5
b(,)12 b(I)f(decided)i(to)e(keep)g(a)h(simple)e(structur)o(e:)17
b(every)12 b(r)o(ecor)o(d)h(is)165 2332 y(stor)o(ed)f(as)g(a)g(string)g
(of)g(raw)g(ASCII)h(r)o(ead)g(dir)o(ectly)g(fr)o(om)f(the)g(disk,)h
(into)f(a)g(dynamic)h(list)f(of)165 2382 y(r)o(ecor)o(ds.)21
b(The)13 b(description)g(of)f(the)f(\256elds)i(\(with)e(their)i(types)e
(and)i(lengths\))f(is)g(stor)o(ed)g(in)g(a)165 2432 y(separate)7
b(list.)13 b(V)l(alues)8 b(ar)o(e)g(r)o(ead)h(fr)o(om)f(and)g(written)g
(to)f(the)h(r)o(ecor)o(ds)i(using)e(functions)g(which)165
2482 y(format)h(the)h(data)g(accor)o(ding)i(to)e(the)f(\256eld)i
(types.)227 2531 y(This)d(solution)f(consumes)f(less)h(memory)g(and)h
(is)f(easier)g(to)g(implement.)12 b(Ther)o(e)d(is)e(a)g(price)165
2581 y(to)h(pay)-5 b(,)10 b(though,)g(for)f(the)g(genericity)g(of)g
(the)g(tools:)j(using)d(the)g(functions)g(to)f(access)h(the)g(data)165
2631 y(\(r)o(eading)g(fr)o(om)f(/)g(writing)h(to)e(a)h(r)o(ecor)o(d\))i
(you)e(have)g(to)g(pass)f(or)h(to)g(r)o(eceive)h(a)f(void)h(pointer)m
(,)g(so)165 2681 y(the)i(pr)o(ogrammer)h(has)f(to)f(know)h(exactly)h
(which)g(is)f(the)g(type)g(of)g(the)g(value)g(that)g(is)g(passed)165
2731 y(or)f(r)o(eceived.)905 2960 y(3)p eop
%%Page: 4 4
4 3 bop 165 195 a Fj(3.2)50 b(Structure)165 274 y Fq(The)10
b Fn(CDBFile)f Fq(object)g(structur)o(e)g(is)g(layed)h(out)f(as)g
(described)h(in)g(Figur)o(e)g(4.)k(It)9 b(contains)g(two)165
324 y(dynamic)h(lists:)j(one)c(list)g(of)g(\256eld)h(descriptors)g
(\(pointers)e(to)h Fn(CField)g Fq(objects\))g(and)g(one)h(list)165
374 y(of)g(r)o(ecor)o(ds)h(\(pointers)f(to)g Fn(Record)f
Fq(structur)o(es\).)p 613 477 597 4 v 613 527 4 50 v
841 515 a Fi(CDBFile)p 1206 527 V 613 530 597 4 v 638
570 256 4 v 638 608 4 38 v 676 602 a(RecordList)p 890
608 V 638 611 256 4 v 3 setlinewidth np 599 813 a closepath
st 638 645 V 638 682 4 38 v 690 677 a(Record)h(2)p 890
682 V 638 685 256 4 v 638 720 V 638 757 4 38 v 690 752
a(Record)g(3)p 890 757 V 638 760 256 4 v 638 794 V 638
832 4 38 v 674 827 a(Record)g(n...)p 890 832 V 638 835
256 4 v 765 568 2 38 v 766 568 a Fh(?)p 732 645 2 36
v 732 645 a(?)p 798 643 V 799 649 a(6)p 732 720 V 732
720 a(?)p 798 718 V 799 724 a(6)p 732 794 V 732 794 a(?)p
798 792 V 799 799 a(6)p 970 570 223 4 v 970 608 4 38
v 1004 602 a Fi(FirstField)p 1189 608 V 970 611 223 4
v 970 645 V 970 682 4 38 v 1025 677 a(Field)g(2)p 1189
682 V 970 685 223 4 v 970 720 V 970 757 4 38 v 1025 752
a(Field)g(3)p 1189 757 V 970 760 223 4 v 1080 568 2 38
v 1081 568 a Fh(?)p 1080 645 2 36 v 1081 645 a(?)p 1080
720 V 1081 720 a(?)p 1 setlinewidth np 1081 755 a 1081
780 li st 1 setlinewidth np 1081 780 a 1230 780 li st
1 setlinewidth np 1230 780 a 1230 589 li st 1189 590
42 2 v 1189 589 a(\033)587 979 y Fq(Figur)o(e)h(4:)j(CDBFile)d
(internal)g(structur)o(e)227 1090 y(The)g(\256eld)g(descriptors)g(ar)o
(e)g(or)o(ganized)g(in)g(a)f(ring:)15 b(the)10 b(last)g
Fn(CField)g Fq(pointer)g(points)g(to)165 1140 y(the)g(\256rst)g
Fn(CField*)f Fq(in)i(the)f(list.)j(The)e(ring)g(is)f(single-linked.)k
(I)d(chose)f(to)f(implement)g(it)h(that)165 1190 y(way)i(because)g(it)g
(is)g(easier)g(to)g(maintain)g(than)g(a)g(double-linked)h(dynamic)g
(list,)f(and)h(quite)165 1239 y(ef)o(\256cient,)e(given)g(the)f(few)g
(number)g(of)g(\256elds)g(that)g(we)g(have)g(in)h(general.)227
1289 y(The)h(r)o(ecor)o(ds)h(ar)o(e)f(stor)o(ed)f(in)g(a)h
(double-linked)f(list.)17 b(I)11 b(tried)h(to)f(use)g(a)g
(single-linked)h(list)165 1339 y(\256rst,)g(but)f(it)g(turned)h(out)e
(that)h(I)g(needed)h(a)g(second)f(link)h(in)g(or)o(der)g(to)f(apply)g
(the)g(quick)i(sort)165 1389 y(algorithm)d(to)f(the)h(list.)k(Pity)-5
b(.)227 1439 y(Another)10 b(thing)f(that)f(worries)h(me)f(about)g(the)h
(quality)g(of)g(the)g(tools)e(is)i(that)f(I)h(did)h(not)f(de-)165
1488 y(clar)o(e)i Fn(Record)e Fq(as)g(an)h(object,)f(but)h(only)f(as)g
(a)h(structur)o(e)g(\(I)f(thought)g(I)h(didn't)g(need)g(to,)f(given)165
1538 y(the)i(little)f(data)h(contained)h(in)f(that)g(structur)o(e\).)16
b Fr(R)p Fq(eal)11 b Fr(C++)h(P)p Fq(r)o(ogrammers)f(won't)f(like)i(it)
f(at)165 1588 y(all...)k(Maybe)10 b(in)h(a)f(later)g(version)h(I)f
(\(or)g(someone)f(else\))h(will)g(\256x)h(that.)227 1638
y Fr(Nota:)25 b Fq(in)7 b(the)g(next)h(subsections,)e(I)i(will)f
(describe)h(the)f(various)g(components)f(of)h(the)g Fn(CD-)165
1688 y(BFile)i Fq(object)f(and)i(their)f(behavior)m(.)14
b(That)9 b(description)g(will)h(only)f(be)g(a)g(quick)h(overview)g(of)
165 1737 y(what)g(every)i(member)f(function)g(does,)g(so)f(if)h(you)g
(r)o(eally)h(need)f(mor)o(e)g(details,)g(have)h(a)f(look)165
1787 y(at)e(the)g(code)h(in)g Fn("cdbfile.cpp")p Fq(,)f(which)h(is)g
(thor)o(oughly)f(commented)g(and)h(should)g(help)165
1837 y(you)g(understand)h(my)f(somehow)f(foggy)h(and)g(twisted)f
(ideas.)165 1958 y Fj(3.3)50 b(The)13 b(CField)f(object)165
2035 y Fq(It)e(is)g(described)h(in)g(the)f(header)h(\256le)f(as)g
(follows)f(:)165 2106 y Fg(class)20 b(CField)165 2146
y({)165 2185 y(private)f(:)205 2225 y(char)279 b(Name[11];)79
b(//)19 b(field)h(name)f(in)h(ASCII)g(zero-filled)205
2264 y(char)279 b(Type;)159 b(//)19 b(field)h(type)f(in)h(ASCII)205
2303 y(unsigned)f(char)100 b(Length;)119 b(//)19 b(field)h(length)f(in)
h(binary)205 2343 y(unsigned)f(char)100 b(DecCount;)79
b(//)19 b(field)h(decimal)f(count)h(in)g(binary)205 2382
y(unsigned)f(char)100 b(FieldNumber;)19 b(//)g(field)h(number)f(within)
h(the)g(record)205 2422 y(unsigned)f(short)80 b(Offset;)119
b(//)19 b(field)h(offset)f(within)h(the)g(character)f(string)205
2461 y(CField*)219 b(Next;)159 b(//)19 b(Next)h(field)f(in)h(the)g
(list)205 2501 y(...)165 2540 y(};)227 2651 y Fq(Y)l(ou)11
b(can)g(see)g(that)e(all)i(the)g(data)f(that)g(can)i(be)e(found)i(in)f
(the)f(\256eld)i(descriptors)f(is)f(stor)o(ed)165 2697
y(in)h(those)f Fn(CField)h Fq(objects)f(\(apart)g(fr)o(om)h(the)f
(\256eld)i(data)e(addr)o(ess,)i(which)g(is)e(useless)g(when)165
2743 y(you)f(ar)o(e)h(not)f(using)h(the)f(\256rst)g(versions)h(of)f
Fr(Ashton-T)-5 b(ate')n(s)10 b(dBASE)g Fq(\).)g(An)g(additional)g
(value)165 2789 y(has)i(been)h(appended:)19 b(the)12
b Fn(Offset)g Fq(\256eld,)i(which)f(indicates)g(the)f(beginning)h(of)f
(the)h(\256eld)165 2835 y(within)7 b(the)g(raw)g(character)g(string.)13
b(The)8 b Fn(CField*)24 b(Next)7 b Fq(pointer)g(points)f(to)h(the)f
(next)i(\256eld)905 2960 y(4)p eop
%%Page: 5 5
5 4 bop 165 195 a Fq(structur)o(e)9 b(in)g(the)f(ring.)15
b(Every)10 b(member)e(variable)h(can)g(be)g(r)o(ead)h(or)e(written)h
(to)f(using)g(the)h(as-)165 241 y(sociated)i(public)g(member)g
(functions.)16 b(T)l(wo)11 b(special)g(functions)g(\(in)g(fact,)g(two)f
(overloaded)165 287 y(versions)g(of)g(the)g(same)f(member)h(function\))
g(ar)o(e)h(pr)o(ovided)g(to)f(access)g(the)g(right)g(CField)i(ob-)165
333 y(ject)7 b(in)h(the)g(ring,)h(using)f(either)g(its)f(name)g(or)h
(its)f(number)h(to)f(identify)h(it.)13 b(These)7 b(ar)o(e)i(r)o
(ecursive)165 379 y(functions)i(which)h(need)g(a)f Fn(CField)g
Fq(pointer)g(to)g(r)o(eturn)h(the)f(position)g(of)g(a)g
Fn(CField)g Fq(object)165 426 y(within)g(the)g(ring)i(\320)e(see)g(the)
g(code)h(for)f(mor)o(e)h(details.)17 b(So)11 b(her)o(e)h(ar)o(e)g(the)f
(headers)h(for)f(those)165 472 y(member)f(functions)g(:)165
584 y Fg(class)20 b(CField)165 623 y({)165 663 y(private)f(:)165
702 y(...)165 742 y(public)g(:)205 781 y(CField\(\);)398
b(//)19 b(default)h(constructor)205 820 y(CField\(char*)f(NName,)g
(char)h(NType,)f(unsigned)h(char)f(NLength,)245 860 y(unsigned)g(char)h
(NDecCount,)f(unsigned)g(char)h(FieldNum\);)783 899 y(//)f(another)h
(constructor)205 939 y(\304CField\(\);)378 b(//)19 b(default)h
(destructor)205 1018 y(char*)f(GetName\(\))279 b({)20
b(return)f(Name;)h(})205 1057 y(void)f(SetName\(char*)g(NewName\))40
b({)20 b(strcpy\(Name,)f(NewName\);)g(})205 1096 y(//)h(...and)f(so)h
(on)g(for)f(all)h(the)g(member)f(variables)205 1175 y(CField*)g
(GetField\(char*)g(FieldName,)g(CField*)h(Start=NULL\);)205
1215 y(CField*)f(GetField\(unsigned)g(short)g(Number,)h(CField*)f
(Start=NULL\);)165 1254 y(};)227 1377 y Fq(That's)8 b(all)h(for)g(the)g
Fn(CField)f Fq(object,)h(which)h(you)e(won't)g(have)h(to)f(use)h(dir)o
(ectly)h(\320)f(unless)165 1426 y(you)h(want)g(to)f(add)i(some)e(mor)o
(e)h(functions)g(to)g(CDBFile.)165 1548 y Fj(3.4)50 b(The)13
b(CDBFile)f(object)165 1627 y Fq(Now)d(let's)f(get)g(down)h(to)f(some)g
(serious)h(work.)k(This)d(is)f(the)f(main)h(part)g(of)f(the)h(toolbox,)
g(and)165 1677 y(only)j(a)g(few)g(member)g(functions)f(of)h
Fn(CDBFile)g Fq(ar)o(e)g(available)g(for)g(the)g(user)g(\(i.e.,)i(the)e
(pr)o(o-)165 1726 y(grammer)g(who)f(doesn't)f(want)h(to)g(handle)h(raw)
f(DBF)i(\256les)e(bar)o(ehands!\).)18 b(This)12 b(object)f(ma-)165
1776 y(nipulates)e(four)i(major)e(entities)g(:)227 1859
y Ff(\017)21 b Fr(The)10 b(CField)g(ring:)15 b Fq(see)10
b(the)f(description)i(of)f Fn(CField)g Fq(above.)227
1942 y Ff(\017)21 b Fr(The)13 b(Record)h(list:)19 b Fq(A)13
b(double-linked)h(list)e(of)h(structur)o(es)g(containing)g(the)f(data)h
(in)g(a)269 1992 y(raw)g(ASCII)h(format,)f(straight)g(fr)o(om)g(the)g
(\256le.)23 b(This)14 b(is)f(the)g(cor)o(e)h(of)f(the)g(object,)h(and)
269 2042 y(most)9 b(of)g(the)h(member)g(functions)g(will)g(manipulate)g
(that)f(list.)227 2125 y Ff(\017)21 b Fr(The)11 b(contents)h(of)f
(those)g(records:)17 b Fq(A)11 b(character)h(table)e(containing)h(raw)g
(data.)16 b(Since)269 2175 y(we)9 b(know)g(the)g(of)o(fset,)g(the)g
(length)g(and)h(the)f(type)g(of)h(each)f(\256eld,)i(we)e(can)h(convert)
g(that)269 2225 y(data)g(into)g(numbers)h(or)g(character)h(strings,)e
(or)h(even)h(booleans;)e(we)g(can)i(also)e(do)g(the)269
2274 y(r)o(everse)h(operation)e(in)i(or)o(der)g(to)f(write)g(or)g
(modify)g(a)g(value)h(within)f(a)g(r)o(ecor)o(d.)227
2357 y Ff(\017)21 b Fr(The)8 b(DBF)g(\256le:)13 b Fq(it)8
b(will)h(be)f(accessed)h(for)f(r)o(eading)i(or)e(writing)h(r)o(ecor)o
(ds.)15 b(It)8 b(is)g Fe(absolutely)269 2407 y(necessary)15
b Fq(to)6 b(open)h(such)h(a)e(\256le)i(in)f(or)o(der)h(to)f(initialize)
f(the)h(\256eld)h(descriptor)f(ring,)i(since)269 2457
y(that)f(toolbox)g(does)g(not)g(pr)o(ovide)i(yet)f(\(shame!)i(shame!\))
h(enough)d(functions)f(to)g(build)269 2507 y(a)i Fn(CDBFile)g
Fq(object)f(fr)o(om)h(scratch.)165 2620 y Fr(3.4.1)42
b(Handling)10 b(the)g(record)i(list)165 2694 y Fq(Her)o(e)e(is)g(the)g
(structur)o(e)g(of)g(the)g(r)o(ecor)o(ds,)i(as)e(declar)o(ed)i(in)e
(the)g(sour)o(ce:)905 2960 y(5)p eop
%%Page: 6 6
6 5 bop 165 235 a Fg(struct)19 b(rec)165 274 y({)205
313 y(char*)g(Contents;)259 b(//)20 b(raw)f(character)g(string)205
353 y(BOOL)g(ModifFlag;)259 b(//)20 b(TRUE)f(if)h(the)g(record)f(has)h
(been)f(modified)205 392 y(unsigned)g(long)h(RecordNumber;)f(//)h
(Position)f(of)h(the)f(record)h(within)f(the)h(file)205
432 y(struct)f(rec)h(*Next;)219 b(//)20 b(Points)f(to)h(the)f(next)h
(record)g(in)f(the)h(list)205 471 y(struct)f(rec)h(*Previous;)139
b(//)20 b(Points)f(to)h(the)f(previous)h(record)f(in)h(the)g(list)165
511 y(};)165 550 y(typedef)f(struct)h(rec)g(Record;)227
662 y Fq(This)9 b(is)f(the)g(minimum)g(structur)o(e)g(that)g(we)g(need)
h(to)e(pr)o(ocess)i(any)f(kind)h(of)f(DBF)h(r)o(ecor)o(ds,)165
708 y(pr)o(ovided)k(that)e(we)g(know)g(the)g(\256eld)h(descriptor)g
(array)-5 b(.)19 b(Let's)10 b(have)i(a)g(look)f(at)g(the)g(private)165
754 y(variables)f(and)h(function)f(headers)h(below)e(:)165
866 y Fg(class)20 b(CDBFile)165 906 y({)165 945 y(private)f(:)205
985 y(Record*)g(RecordList;)59 b(//)20 b(Head)g(of)f(the)h(list)g(of)f
(records)205 1024 y(Record*)g(CurrentRec;)59 b(//)20
b(Current)f(record)h(pointed)f(in)h(the)g(list)165 1064
y(...)205 1103 y(Record*)f(ReadRecord\(unsigned)g(long)g(RecNum\);)205
1142 y(Record*)g(CreateNewRecord\(\);)205 1182 y(Record*)g
(GetRecord\(unsigned)g(long)g(RecordNum\);)205 1221 y(void)g
(Append\(Record*)g(Rec,)h(Record*)f(Tail=NULL\);)205
1261 y(void)g(DeleteRecord\(Record)g(*Rec\);)205 1300
y(void)g(SortAllRecords\(Record)g(*Head,)g(Record)h(*Tail,)f(CField*)h
(Criter1\);)165 1340 y(};)227 1462 y Fn(CDBFile)25 b
Fq(contains)9 b(two)h(pointers)g(to)f(r)o(ecor)o(ds:)16
b(the)10 b(former)m(,)h Fn(RecordList)p Fq(,)f(is)h(the)f(at)165
1512 y(head)e(of)f(the)h(double-linked)g(list)f(of)h(r)o(ecor)o(ds,)i
(wher)o(eas)d(the)g(latter)m(,)h Fn(CurrentRec)p Fq(,)g(points)f(to)165
1562 y(the)h(r)o(ecor)o(d)i(that)d(is)h(being)h(handled)g(by)g(the)f
(user)m(.)13 b Fn(CurrentRec)7 b Fq(is)i(mainly)f(used)g(by)g(public)
165 1611 y(functions)j(that)g(give)i(the)e(user)h(some)f(possibilities)
f(to)h(access)g(the)h(r)o(ecor)o(ds)h(indir)o(ectly)g(\(for)165
1661 y(r)o(eading)e(or)g(writing,)f(cr)o(eating)h(or)g(deleting\).)227
1711 y(As)g(for)f(the)g(private)g(functions,)g(they)g(do)h(the)f
(following)f(:)227 1794 y Ff(\017)21 b Fn(ReadRecord\(\))6
b Fq(r)o(eads)h(the)f Fn(RecNum)p Fd(th)h Fq(r)o(ecor)o(d)h(in)f(the)g
(DBF)g(\256le,)h(and)g(r)o(eturns)f(a)f(poin-)269 1844
y(ter)k(to)g(a)g(newly)g(cr)o(eated)h(r)o(ecor)o(d)h(containig)e(the)g
(accessed)g(data.)227 1927 y Ff(\017)21 b Fn(CreateNewRecord\(\))9
b Fq(r)o(eturns)h(a)g(pointer)g(to)g(a)g(newly)g(cr)o(eated)h(r)o(ecor)
o(d.)227 2010 y Ff(\017)21 b Fn(GetRecord\(\))9 b Fq(points)g(to)h(the)
g(r)o(ecor)o(d)i(whose)d(number)i(matches)e Fn(RecordNum)p
Fq(.)227 2093 y Ff(\017)21 b Fn(Append\(\))9 b Fq(inserts)g
Fn(Rec)h Fq(in)g(the)g(list)f(after)h Fn(Tail)p Fq(,)g(if)g
Fn(Tail)g Fq(is)f(not)h Fn(NULL)p Fq(.)g(Otherwise,)269
2143 y(it)g(will)g(insert)g Fn(Rec)g Fq(in)h(the)f(list)f(accor)o(ding)
j(to)e(its)g(r)o(ecor)o(d)i(number)m(.)227 2226 y Ff(\017)21
b Fn(DeleteRecord\(\))9 b Fq(simply)h(deletes)f(the)h(r)o(ecor)o(d)i
(and)f(its)e(contents.)227 2309 y Ff(\017)21 b Fn(SortAllRecords\(\))10
b Fq(operates)g(a)i(quicksort)f(algorithm)g(on)h(the)f(r)o(ecor)o(d)i
(list.)18 b(The)269 2359 y(sorting)9 b(is)h(done)g(on)g(the)f
(criterium)i Fn(Criter1)p Fq(,)f(which)g(points)f(to)g(a)h(\256eld)g
(descriptor:)269 2409 y(the)f(list)h(will)f(be)h(sorted)g(in)g(incr)o
(easing)h(or)o(der)g(of)e(the)h Fn(Criter1)f Fq(\256eld)h(of)g(the)f(r)
o(ecor)o(ds.)227 2488 y(The)14 b(public)g(functions)f(ar)o(e)h(in)g
(fact)f(a)g(convenient)h(way)f(to)g(embed)g(the)g(private)h(func-)165
2534 y(tions)9 b(without)f(r)o(equiring)k(the)d(user)h(to)f(manipulate)
f(those)h(ugly)h(r)o(ecor)o(d)h(lists)e(or)h(structur)o(es)165
2580 y(\(yuck!\),)h(let)f(alone)g(the)h(\256eld)g(descriptors)f
(\(ugh!\).)15 b(He)10 b(just)f(has)i(to)e(instantiate)g(a)i
Fn(CDBFile)165 2626 y Fq(object)f(in)i(his)e(pr)o(ogram,)i(and)g(mind)f
(his)g(own)f(business.)15 b(All)d(he)f(has)g(to)f(know)h(about)f(how)
165 2672 y(that)g(object)g(works)h(is)g(that)f(ther)o(e)h(is)g(a)g
(special)g(pointer)f Fn(CurrentRec)h Fq(\(see)f(above\))h(which)165
2718 y(points)f(at)g(the)g(r)o(ecor)o(d)i(he)f(wants)e(to)h(access)g
(or)h(to)f(modify)-5 b(,)11 b(and)g(that)e Fn(CurrentRec)h
Fq(can)h(be)165 2764 y(moved)h(all)g(along)f(the)h(list)f(very)i
(easily)-5 b(,)12 b(in)h(an)e(iterative)h(way)-5 b(.)19
b(Her)o(e)12 b(ar)o(e)g(the)f(public)i(func-)165 2810
y(tions)c(that)h(will)g(enable)g(the)g(pr)o(ogrammer)h(to)e(do)h(so)g
(:)905 2960 y(6)p eop
%%Page: 7 7
7 6 bop 165 235 a Fg(class)20 b(CDBFile)165 274 y({)165
313 y(...)165 353 y(public:)205 392 y(unsigned)f(long)h
(LoadFileToMemory\(\);)205 432 y(unsigned)f(long)h(WriteModified\(\);)
205 471 y(void)f(SortOn\(unsigned)g(short)h(Criterium1\);)205
511 y(void)f(GetAtRecord\(unsigned)g(long)h(RecordNum\))265
550 y({)f(CurrentRec=GetRecord\(RecordNum\);)f(})205
589 y(unsigned)h(long)h(GetRecordNum\(\))265 629 y({)f(if)h
(\(CurrentRec\))f(return)h(CurrentRec->RecordNumber;)304
668 y(else)g(return)g(0L;})225 708 y(BOOL)f(GetNextRecord\(\))265
747 y({)g(if)h(\(CurrentRec\))f({)h(CurrentRec=CurrentRec->Next;)e
(return)h(TRUE;})524 787 y(else)g(return)h(FALSE;)f(})225
826 y(BOOL)g(GetPreviousRecord\(\))265 866 y({)g(if)h(\(CurrentRec\))f
({)h(CurrentRec=CurrentRec->Previous;)e(return)h(TRUE;})524
905 y(else)g(return)h(FALSE;)f(})205 944 y(void)g(LoadRecord\(unsigned)
g(long)h(RecordNum\))265 984 y({)f(CurrentRec=ReadRecord\(RecordNum\);)
f(Append\(CurrentRec\);)g(})205 1023 y(void)h(DeleteCurrentRec\(\))265
1063 y({)g(CurrentRec=CurrentRec->Previous;)f
(DeleteRecord\(CurrentRec->Next\);})205 1102 y(void)h
(CreateAndAppend\(\))265 1142 y({)g(CurrentRec=CreateNewRecord\(\);)f
(Append\(CurrentRec\);})205 1181 y(void)h(ClearAllRecords\(\);)165
1220 y(...)165 1260 y(};)227 1377 y Fq(For)10 b(most)e(of)h(those)f
(functions,)h(the)g(souce)h(code)f(is)g(self-explanatory)-5
b(.)14 b(Some)8 b(others)h(ar)o(e)165 1427 y(less)k(obvious:)21
b Fn(SortOn\(\))p Fq(,)14 b(for)g(example,)h(launches)e(the)h(r)o
(ecursive)h(quicksort)f(function)165 1476 y Fn(SortAllRecords\(\))6
b Fq(\(see)g(above\).)13 b Fn(LoadFileToMemory\(\))6
b Fq(r)o(eads)h(all)h(the)f(r)o(ecor)o(ds)h(on)165 1526
y(the)j(\256le)g(using)h Fn(ReadRecord\(\))e Fq(and)i(stor)o(es)e(the)h
(r)o(esulting)h(r)o(ecor)o(ds)g(in)g(the)f(list.)17 b
Fn(Write-)165 1576 y(Modified\(\))11 b Fq(checks)i(all)f(the)f(r)o
(ecor)o(ds)i(in)g(the)e(list)g(and)i(writes)e(some)g(of)g(them)g(to)g
(the)h(\256le)165 1626 y(if)g(they)f(have)h(been)f(edited)h(or)g
(modi\256ed.)18 b Fn(ClearAllRecords\(\))10 b Fq(empties)h(the)g(list)g
(and)165 1676 y(deletes)h(all)h(the)g(r)o(ecor)o(ds.)24
b(Some)12 b(mor)o(e)h(complex)g(functions)g(also)f(involve)i
(manipulating)165 1726 y(the)8 b(contents)f(of)h(those)f(r)o(ecor)o(ds)
i(\()p Fn(SortAllRecords\(\))e Fq(is)g(one)h(of)g(those\),)g(or)g(the)g
(DBF)h(\256le.)165 1775 y(They)i(will)f(be)g(explained)h(in)g(the)f
(next)g(paragraphs.)165 1887 y Fr(3.4.2)42 b(Handling)10
b(the)g(contents)i(of)e(the)h(records)165 1962 y Fq(W)l(e)f(have)i
(seen)e(the)g(structur)o(e)h(of)f(the)h(r)o(ecor)o(ds)h(in)f(the)f(pr)o
(evious)h(section;)g(let's)f(have)h(a)g(look)165 2008
y(at)f(the)g(functions)f(that)h(can)h(access)f(the)g(contents)f(of)h
(those)f(r)o(ecor)o(ds.)165 2114 y Fg(class)20 b(CDBFile)165
2154 y({)165 2193 y(...)165 2233 y(private:)205 2272
y(void*)f(GetFieldValue\(Record*)g(Rec,)g(CField*)h(Field\);)205
2311 y(void)f(SetFieldValue\(Record*)g(Rec,)g(CField*)h(Field,)f(void*)
h(Value\);)205 2351 y(BOOL)f(IsBigger\(void)g(*v1,)h(void)g(*v2,)f
(CField*)h(Criterium\);)205 2390 y(BOOL)f(IsSmaller\(void)g(*v1,)h
(void)g(*v2,)f(CField*)h(Criterium\);)165 2430 y(...)165
2469 y(};)227 2586 y Fq(The)8 b(\256rst)e(one)h(is)g
Fn(GetFieldValue\(\))p Fq(.)k(That)c(function)g(takes)f(two)f(ar)o
(guments:)12 b(a)7 b(poin-)165 2636 y(ter)h(to)g(the)g(r)o(ecor)o(d)i
(that)d(is)h(being)h(accessed)f(and)h(a)f(pointer)g(to)g(the)g(\256eld)
h(descriptor)g(\(the)f(\256eld)165 2686 y(that)k(contains)h(the)g
(accessed)g(value\).)24 b(Knowing)13 b(the)g(of)o(fset)f(and)i(the)e
(length)i(of)f(the)g(\256eld)165 2736 y(within)e(the)h(contents)e
(string,)j(the)e(function)g(\256rst)h(extracts)f(the)g(corr)o
(esponding)i(substring.)165 2785 y(Then)d(it)g(checks)g(the)f(type)g
(of)g(the)g(\256eld.)15 b(If)9 b(the)g(\256eld)h(is)g(of)f(type)g
Fn('N')p Fq(\(numeric)h(value\),)g(ther)o(e)165 2835
y(ar)o(e)e(two)f(cases:)13 b(if)8 b(its)f(decimal)h(count)g(is)g(null,)
h(then)f(the)g(substring)f(will)h(be)g(converted)h(into)e(a)905
2960 y(7)p eop
%%Page: 8 8
8 7 bop 165 195 a Fn(long)7 b Fq(integer)g(value;)h(if)f(not,)h(it)e
(will)h(be)g(converted)h(into)e(a)h Fn(double)f Fq(\257oating-point)g
(value.)13 b(If)165 245 y(the)8 b(\256eld)g(is)f(of)h(type)f
Fn('L')p Fq(\(logical)h(value\),)h(the)e(substring)h(will)f(be)h
(converted)h(into)e(a)h(boolean)165 295 y(value)13 b(\(de\256ned)g(as)e
Fn(BOOL)h Fq(in)h(that)e(package,)j(and)e(in)h(Micr)o(o$oft's)e(V)n
(isual)h(C++\).)21 b(In)12 b(other)165 345 y(cases,)e(if)f(the)h
(\256eld)g(is)g(of)f(type)h Fn('C')f Fq(\(character)i(string\))e(or)h
Fn('D')p Fq(\(date\),)g(or)g(even)g Fn('M')p Fq(\(Memo)165
394 y(number)g(for)g(.DBT)i(blocks\))e(,)g(ther)o(e)h(will)f(be)g(no)g
(conversion,)h(the)f(character)h(substring)e(will)165
444 y(be)i(kept)g(`as)f(is'.)16 b(Maybe)11 b(some)g(speci\256c)g
(conversions)h(would)f(be)g(useful,)g(particularly)h(for)165
494 y(dates)d(or)g(memo)g(block)g(numbers,)h(but)f(I)h(did)g(not)f
(need)h(those)e(functionalities)h(for)g(my)h(own)165
544 y(application.)j(It's)6 b(up)h(to)g(you)g(to)g(add)h(mor)o(e)f
(conversions,)i(in)e(r)o(espect)h(of)f(the)g(GPL,)h(of)f(course.)227
594 y(In)12 b(all)g(cases,)g(the)f(r)o(esult)g(of)h(the)f(conversion)h
(will)g(be)f(put)h(in)g(a)f(dynamically)h(allocated)165
643 y(pointer)7 b(of)g(the)h(corr)o(esponding)g(type,)g(and)g(that)f
(pointer)g(will)h(be)f(r)o(eturned)i(as)e(a)g Fn(void)g
Fq(poin-)165 693 y(ter)m(.)13 b(This)7 b(is)g(the)g(inelegant)f(aspect)
h(of)f(the)h(function:)12 b(the)7 b(pr)o(ogrammer)g(has)g(to)f(know)h
(exactly)165 743 y(what)h(kind)h(of)f(data)g(he)g(is)h(r)o(eceiving)h
(in)f(that)e Fn(void)h Fq(pointer)m(,)h(and)g(he)f(also)g(has)g(to)g
(delete)g(that)165 793 y(pointer)k(\(it)g(has)g(to)g(be)g(deleted,)h
(since)g(it)f(has)g(been)h(allocated)f(dynamically\).)21
b(If)12 b(he)g(is)h(us-)165 843 y(ing)d(a)f(\256xed)h(type)f(of)g(r)o
(ecor)o(ds)i(\(for)e(a)h(speci\256c)g(application,)f(an)h(addr)o(ess)f
(book)g(for)h(example\))165 892 y(this)f(will)h(not)g(be)g(a)g(pr)o
(oblem.)k(But)c(if)g(the)g(type)f(of)h(r)o(ecor)o(ds)h(can)g(vary)f(in)
h(that)e(application)g(\(a)165 942 y(generic)h(spr)o(eadsheet)e
(application,)i(for)f(example\),)g(the)f(pr)o(ogrammer)i(will)f(pr)o
(obably)g(have)165 992 y(to)e(verify)i(the)f(type)g(of)f(the)h(data,)h
(using)f(public)g(functions)g(such)h(as)e Fn(GetFieldType\(\))p
Fq(\(see)165 1042 y(below\).)227 1092 y(The)14 b(same)e(canvas)h
(applies)f(to)g Fn(SetFieldValue\(\))p Fq(,)h(the)g(other)f(way)h(r)o
(ound:)20 b(when)165 1142 y(calling)10 b(that)f(function,)h(a)f
Fn(void)g Fq(pointer)g(containing)h(the)f(value)h(to)f(be)g(set)g(is)g
(passed,)g(along)165 1191 y(with)f(a)g(pointer)g(to)g(the)g(\256eld)h
(descriptor)m(.)14 b(The)9 b(function)f(then)g(converts)h(the)f
(contents)f(of)h(the)165 1241 y Fn(void)i Fq(pointer)g(to)g(the)g
(right)g(substring,)g(and)h(copies)f(it)g(to)g(the)g(contents)f(of)h
(the)g(r)o(ecor)o(d.)227 1291 y(The)h(other)e(two)g(functions,)g
Fn(IsBigger\(\))g Fq(and)h Fn(IsSmaller\(\))p Fq(,)g(use)f
Fn(GetFieldVa-)165 1341 y(lue\(\))j Fq(to)g(compar)o(e)g(two)g(r)o
(ecor)o(ds)i(on)e(the)g(basis)g(of)g(their)g(r)o(espective)h(values)g
(for)f(a)g(given)165 1391 y(\256eld.)j(They)c(ar)o(e)f(called)h(by)g
Fn(SortAllRecords\(\))e Fq(only)h(so)g(far)m(.)227 1437
y(The)h(public)g(functions)f(that)f(can)i(be)f(used)g(by)h(the)f(pr)o
(ogrammer)g(ar)o(e)h(the)f(following:)165 1549 y Fg(class)20
b(CDBFile)165 1588 y({)165 1628 y(...)165 1667 y(public:)205
1707 y(void)f(SetFieldValue\(char*)g(Field,)g(void*)h(Value\);)205
1746 y(void)f(SetFieldValue\(unsigned)g(short)g(FieldNum,)h(void*)f
(Value\);)205 1785 y(void*)g(GetFieldValue\(char*)g(Field\);)205
1825 y(void*)g(GetFieldValue\(unsigned)g(short)g(FieldNum\);)205
1864 y(char)g(GetFieldType\(unsigned)g(short)g(NumField\))265
1904 y({)g(return)h(\(FirstField->GetField\(NumField\)\)->GetType\(\);)
d(})205 1943 y(void)i(DeleteVoidPointer\(void*)g(Pointer,)g(unsigned)g
(short)h(Field\);)205 1983 y(void)f(DeleteVoidPointer\(void*)g
(Pointer,)g(char*)h(Field\);)165 2022 y(...)165 2061
y(};)227 2184 y Fq(The)9 b(overloaded)g(and)f(public)h(versions)f(of)g
Fn(SetFieldValue\(\))f Fq(and)h Fn(GetFieldVa-)165 2234
y(lue\(\))i Fq(ar)o(e)g(the)g(equivalent)g(of)f(their)h(private)h
(versions,)f(but)f(they)h(use)g(either)g(the)f(name)h(or)165
2284 y(the)i(number)g(of)f(the)h(\256eld)g(to)f(r)o(efer)i(to)e(it.)18
b Fn(GetFieldType\(\))11 b Fq(enables)g(the)h(pr)o(ogrammer)165
2333 y(to)f(know)h(the)f(type)h(of)f(the)h(\256eld)g(r)o(efer)o(enced)i
(by)e Fn(NumField)p Fq(.)18 b(I)12 b(also)f(chose)h(to)f(cr)o(eate)h
Fn(De-)165 2383 y(leteVoidPointer\(\))7 b Fq(so)h(that)f(the)i(pr)o
(ogrammer)f(can)h(delete)f(easily)g(the)h Fn(void)f Fq(pointers)165
2433 y(he)i(r)o(eceives)i(fr)o(om)e(calls)g(to)g Fn(GetFieldValue\(\))p
Fq(.)227 2483 y(That's)i(all)h(about)e(handling)j(the)e(contents)g(of)g
(the)g(r)o(ecor)o(ds,)j(let's)c(have)i(a)f(look)h(now)f(at)165
2533 y(how)e(the)g(\256les)g(ar)o(e)g(handled.)165 2646
y Fr(3.4.3)42 b(Handling)10 b(the)g(\256les)165 2725
y Fq(As)j(I)g(said)g(earlier)g(on,)h(I)f(did)h(not)e(implement)g(the)h
(possibility)e(to)i(cr)o(eate)g(a)g(DBF)g(\256le)g(fr)o(om)165
2775 y(scratch,)c(adding)g(\256elds)f(in)h(the)e(\256eld)i(descriptor)f
(ring)h(and)f(the)g(r)o(ecor)o(ds)h(or)g(r)o(emoving)f(them.)165
2824 y(Ther)o(efor)o(e,)15 b(one)e(has)g(to)f(open)h(an)g(existing)g
(DBF)h(\256le)f(\256rst,)h(then)f(one)g(can)g(only)g(add,)i(edit)905
2960 y(8)p eop
%%Page: 9 9
9 8 bop 165 195 a Fq(or)12 b(r)o(emove)g(r)o(ecor)o(ds)h(fr)o(om)e
(that)g(\256le,)i(and)f(save)f(it)h(or)g(save)f(it)g(as)h(a)f(new)h
(\256le)f(\(with)g(another)165 245 y(pathname\).)227
291 y(When)d(r)o(eferring)i(to)e(Section)g(2,)h(the)f(header)h(of)f
(the)g(\256le)h(contains)f(a)g(few)g(speci\256c)h(param-)165
337 y(eters)g(that)g(describe)i(the)f(characteristics)g(of)g(the)f
(\256le.)14 b(They)d(ar)o(e)f(implemented)g(in)g(CDBFile)165
383 y(as)g(private)g(member)g(variables:)165 440 y Fg(class)20
b(CDBFile)165 480 y({)165 519 y(...)165 559 y(private:)205
598 y(char)f(PathName[256];)219 b(//)19 b(Path)h(name)g(for)f(the)h
(dBase)g(III)f(file)205 638 y(FILE)g(*FileHandle;)259
b(//)19 b(Handler)h(for)f(the)h(dBase)g(III)f(file)205
677 y(unsigned)g(short)h(HeaderSize;)79 b(//)19 b(Length)h(of)g(header)
f(structure)205 717 y(unsigned)g(short)h(FieldCount;)79
b(//)19 b(Number)h(of)g(fields)f(in)h(each)g(record)205
756 y(unsigned)f(long)h(RecordCount;)79 b(//)19 b(Number)h(of)g
(records)f(in)h(the)g(file)205 795 y(BOOL)f(ModifiedFlag;)239
b(//)19 b(TRUE)h(if)g(the)f(data)h(has)g(been)f(modified)205
835 y(BOOL)g(FullFileInMemory;)159 b(//)19 b(TRUE)h(if)g(the)f(entire)h
(file)g(is)f(loaded)205 874 y(unsigned)g(short)h(RecordLength;)39
b(//)19 b(Length)h(of)g(the)f(record)h(strings)205 953
y(Record*)f(RecordList;)g(//)h(Head)g(of)g(the)f(list)h(of)g(records)
205 993 y(Record*)f(CurrentRec;)g(//)h(Current)g(record)f(pointed)g(in)
h(the)g(list)205 1032 y(CField*)f(FirstField;)g(//)h(Head)g(of)g(the)f
(list)h(of)g(fields)165 1071 y(...)165 1111 y(};)227
1208 y Fq(Some)13 b(of)g(them)g(can)h(be)f(accessed)h(and)g(modi\256ed)
f(dir)o(ectly)i(by)f(the)f(pr)o(ogrammer)m(,)i(us-)165
1254 y(ing)10 b(dedicated)h(public)f(functions;)g(most)e(of)i(them,)f
(however)m(,)i(ar)o(e)f(only)g(accessed)g(and)g(pr)o(o-)165
1300 y(cessed)i(internally)h(by)f(the)g(member)g(functions)g(of)g(the)g
(package,)h(since)g(the)f(pr)o(ogrammer)165 1346 y(should)h(not)g(need)
g(to)f(r)o(ead)i(or)f(modify)g(them)g(in)g(any)g(way)-5
b(.)23 b(Her)o(e)13 b(ar)o(e)g(the)g(few)g(functions)165
1392 y(that)c(enable)h(the)g(pr)o(ogrammer)h(to)e(do)i(so:)165
1449 y Fg(class)20 b(CDBFile)165 1489 y({)165 1528 y(...)165
1568 y(public:)205 1607 y(BOOL)f(IsOpen\(\))265 1646
y({)g(return)h(\(BOOL\)\(FileHandle!=NULL\);)e(})205
1686 y(unsigned)h(long)h(GetRecordCount\(\))265 1725
y({)f(return)h(RecordCount;)f(})205 1765 y(unsigned)g(short)h
(GetFieldCount\(\))265 1804 y({)f(return)h(FieldCount;)f(})165
1844 y(...)165 1883 y(};)227 1980 y Fq(The)11 b(other)f(functions)g
(perform)g(bigger)h(tasks,)e(of)h(a)g(higher)h(level.)k(Her)o(e)10
b(they)g(ar)o(e:)165 2037 y Fg(class)20 b(CDBFile)165
2076 y({)165 2116 y(...)165 2155 y(public:)205 2195 y(CDBFile\(\);)205
2234 y(CDBFile\(char*)f(Path\);)205 2274 y(\304CDBFile\(\);)205
2313 y(BOOL)g(Clean\(\);)205 2352 y(BOOL)g(OpenFile\(char*)g(Path\);)
205 2392 y(BOOL)g(CloseFile\(\);)205 2431 y(unsigned)g(long)h
(WriteAllToFile\(char)e(*Path=NULL\);)165 2510 y(private:)205
2550 y(BOOL)h(WriteHeader\(char*)g(Path=NULL\);)165 2589
y(...)165 2628 y(};)227 2736 y Fq(The)12 b(only)f(private)h(function)f
(her)o(e)h(is)f(used)g(to)g(r)o(ewrite)g(the)g(\256le)g(header)h(when)f
(some)g(of)165 2785 y(its)f(information)g(has)g(changed.)16
b(It)11 b(is)f(also)g(used)h(to)f(write)g(the)g(modi\256ed)h(\256le)g
(under)h(a)e(new)165 2835 y(pathname.)905 2960 y(9)p
eop
%%Page: 10 10
10 9 bop 227 195 a Fq(The)13 b(public)f(function)g(that)e(uses)h
Fn(WriteHeader\(\))g Fq(is)g Fn(WriteAllToFile\(\))p
Fq(.)17 b(That)165 245 y(function)10 b(is)g(used)g(only)g(when)g(the)f
(entir)o(e)i(\256le)f(has)g(been)g(loaded)g(into)f(memory)h(and)g(has)g
(to)165 295 y(be)i(r)o(ewritten)g(or)h(saved)f(under)i(a)e(new)g
(pathname.)19 b(Note)12 b(that)f(it)h(contains)g(non-portable)165
345 y(time-encoding)d(functions,)g(which)g(ar)o(e)g(speci\256cally)g
(DOS-oriented,)g(and)g(will)g(cause)f(tr)o(ou-)165 394
y(ble)j(when)g(ported)g(to)f(UNIX)h(/)g(Linux.)18 b(See)10
b(the)h(code)g(in)g Fn("cdbfile.cpp")f Fq(for)h(mor)o(e)g(de-)165
444 y(tails.)227 494 y(The)g(other)f(public)h(functions)f(perform)g
(the)g(following)g(tasks:)227 577 y Ff(\017)21 b Fn(CDBFile\(\))6
b Fq(is)g(the)h(default)f(constructor)m(,)i(wher)o(eas)e
Fn(CDBFile\(char*)24 b(Path\))6 b Fq(cr)o(e-)269 627
y(ates)j(the)h(object)f(and)i(opens)f(the)g(\256le)g(known)g(as)g
Fn(Path)p Fq(;)227 710 y Ff(\017)21 b Fn(\304CDBFile\(\))9
b Fq(is)h(the)g(default)g(destructor;)227 793 y Ff(\017)21
b Fn(Clean\(\))8 b Fq(r)o(esets)h(\(or)g(initializes\))f(the)h
(contents)f(of)h(the)g Fn(CDBFile)f Fq(object,)h(and)h(is)f(cal-)269
843 y(led)h(both)g(by)h(the)f(constructors)f(and)i(the)f(destructor;)
227 926 y Ff(\017)21 b Fn(OpenFile\(char*)i(Path\))14
b Fq(\256rst)f(r)o(esets)g(the)h(object)f(and)h(then)g(opens)f(a)g(new)
h(\256le)269 976 y(under)f Fn(Path)p Fq(;)g(that)e(function)h(also)g
(sets)f(most)f(of)i(the)g(data)g(members)f(to)g(the)h(values)269
1025 y(mentioned)e(in)g(the)g(\256le,)h(and)g(particularly)-5
b(,)11 b(it)f(builds)h(the)f(\256eld)h(descriptor)f(ring.)227
1108 y Ff(\017)21 b Fn(CloseFile\(\))9 b Fq(simply)h(closes)g(the)g
(\256le)g(and)h(r)o(esets)e(all)h(the)g(data.)227 1191
y(That's)c(all)h(for)g(the)f(description)h(of)g(the)f(code.)14
b(Again,)8 b(if)f(you)g(need)g(mor)o(e)g(details,)g(R)n(TFC)1636
1176 y Fo(2)1656 1191 y Fq(.)165 1334 y Fs(4)60 b(An)14
b(example:)19 b(the)14 b(T)-7 b(estDBF)14 b(\256le)h(editor)165
1429 y Fq(This)8 b(is)g(an)g(elementary)f(C-style)g(console)g
(application,)i(pr)o(oposing)e(a)h(few)f(tools)g(to)g(edit)g(DBF)165
1479 y(\256les.)16 b(It)11 b(does)g(not)g(demonstrate)e
Fe(all)i Fq(of)g(the)f(possibilities)g(of)h Fn(CDBFile)p
Fq(,)g(but)g(it)f(shows)g(you)165 1528 y(most)f(of)h(them.)k(Also,)d
(note)e(that)h(not)g(all)g(the)g(shortkeys)g(ar)o(e)h(displayed)g(on)f
(the)g(top)g(line)h(of)165 1578 y(the)f(console)f(when)h(you)g(launch)h
(the)f(pr)o(ogram.)k(This)c(is)g(a)g(typically)g(user)o(-unfriendly)i
(\(but)165 1628 y(hopefully)e(hacker/pr)o(ogrammer)o(-friendly\))i
(application.)227 1678 y(If)e(you)h(take)e(a)h(look)g(at)g(the)f(sour)o
(ce)i(code)g(\()p Fn("testdbf.cpp")p Fq(\),)e(you)h(will)g(have)h(a)f
(better)165 1728 y(idea)e(of)e(how)h(the)g Fn(CDBFile)g
Fq(objects)f(and)i(its)f(methods)f(should)i(be)f(used)g(within)g(a)g
(pr)o(ogram.)165 1778 y(The)j Fn("case)24 b('e')h(:")8
b Fq(part)h(of)g(the)f Fn(main\(\))h Fq(function)f(particularly)i
(deserves)f(your)g(atten-)165 1827 y(tion:)k(it)c(shows)f(how)g(to)h
(implement)f(a)g(generic)j(r)o(ecor)o(d)f(editor)f(using)h(that)e
(package)h(\(which)165 1877 y(is)h(non-trivial\).)227
1927 y(I)f(will)h(not)e(comment)g(mor)o(e)h(on)g(that)g(application:)k
(the)8 b(best)h(thing)g(for)g(you)g(is)g(de\256nitely)165
1977 y(to)h(have)g(a)g(look)g(at)g(the)g(sour)o(ce)g(code.)15
b Fc(Hmmm...)f(Didn')o(t)9 b(I)h(say)e(that)i(earlier)e(on?)j(I'm)f
(not)g(sur)o(e...)i Fd(:-\))165 2120 y Fs(5)60 b(Conclusion)165
2214 y Fq(W)l(ell,)9 b(that's)f(all)h(for)g(the)g(time)f(being.)14
b(I'm)8 b(not)h(quite)f(sur)o(e)i(that)e(I)h(will)g(have)g(time)g
(enough)g(to)165 2264 y(support)e(that)f(package)i(in)g(the)f(next)g
(few)g(months,)h(but)f(I)g(will)h(do)f(my)h(best.)k(However)m(,)c(if)f
(you)165 2314 y(have)h(some)e(questions)g(\(in)h(spite)f(of)h(all)g
(the)g(ef)o(forts)f(I)h(did)i(to)d(make)h(that)f(pr)o(oject)h
(understand-)165 2364 y(able)14 b(:-\),)i(comments)d(or)i(bug)f(r)o
(eports,)i(just)d(e-mail)h(me)g(at:)22 b Fn(herve.gourmelon@ens-)165
2413 y(sat.fr)10 b Fq(\(until)g(April)h(98\).)227 2463
y(As)c(far)g(as)g(the)f(portability)g(is)h(concerned,)j(I)d(only)g
(tried)g(that)f(package)h(under)h(Micr)o(o$oft's)165
2513 y(V)n(isual)f(C++.)14 b(Porting)7 b(it)g(to)g(Borland's)h(or)f(W)l
(atcom's)f(should)h(be)h(no)f(tr)o(ouble,)h(but)f(bewar)o(e)h(of)165
2563 y(the)i(de\256nition)h(of)f(the)g Fn(BOOL)g Fq(type)g(in)h
Fn(cdbfile.h)p Fq(:)j(you)c(might)g(have)h(to)f(modify)g(it)g(using)165
2613 y(pr)o(e-compilation)h(dir)o(ectives.)19 b(If)11
b(you)g(want)g(ot)g(use)g(it)g(under)h(UNIX/Linux)h(\(using)f
Fn(cc)f Fq(or)165 2663 y Fn(gcc)p Fq(\),)e(you)f(should)h(be)f(able)h
(to)e(\256nd)j(a)e(special)g(GNU/Linux)j(version)e(that)e(I)i(r)o
(eleased)g(lately)165 2712 y(in)i(the)f(Linux)i(part)e(of)g(the)h
(Sunsite)f(ar)o(chive)i(\(that)d(version)i(is)f(easier)h(to)f(port,)g
(by)h(the)f(way\),)p 165 2751 600 2 v 207 2777 a Fl(2)225
2789 y Fk(Read)e(The)h(F***ing)g(Code\256les!)894 2960
y Fq(10)p eop
%%Page: 11 11
11 10 bop 165 195 a Fq(as)10 b(follows:)165 245 y Fb
(ftp://sunsite.unc.)o(edu/pub/Linux/devel/)o(db/cdb\256le.t)o(ar)n(.)o
(gz)227 295 y Fq(If)h(you)f(decide)i(to)e(impr)o(ove)h(signi\256cantly)
f(the)h(code)g(and)f(to)g(add)h(new)g(functionalities,)165
345 y(please)c(contact)h(me:)13 b(I)8 b(will)g(pr)o(ovide)i(you)e(with)
f(the)h(L)1009 336 y Fa(A)1025 345 y Fq(T)1043 354 y(E)1065
345 y(X)g(sour)o(ce)g(of)g(the)g(postscript)f(\256le)h(you)165
394 y(ar)o(e)13 b(r)o(eading,)h(so)d(that)g(you)h(can)h(add)g(the)f
(description)g(of)g(your)g(new)g(functions)g(or)g(objects)165
444 y(and)h(your)g(name)f(will)g(be)h(added)g(to)f(the)g(contributor)s
('s)g(\256le)h(of)f(the)g(package,)i(and)f(to)f(this)165
494 y(page.)802 585 y Fj(Have)h(fun!)165 728 y Fs(6)60
b(Contributors)165 823 y Fr(Herv)s(\302)-17 b(e)10 b(GOURMELON)165
873 y Fn(herve.gourmelon@enssat.fr)165 972 y Fr(Erik)h(Bachmann)g
Fq(\(for)f(the)g(GNU/Linux)i(version\))165 1022 y Fn(ebp@dde.dk)175
1072 y Fb(http://www)n(.geocities.com)o(/S)o(iliconV)m
(alley/Pines/2563/)227 1240 y Fq(I)f(hope)f(that)f(several)h(other)g
(people)g(will)g(add)h(their)g(names)e(to)h(that)f(list...)895
2960 y(1)n(1)p eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
